<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <h1>Rock Paper Scissors Game</h1>
    <div class="flex-container-1">
      <button class="btn flex-item rock">Rock</button>
    </div>
    <div class="flex-container-2">
      <button class="btn flex-item paper">Paper</button>
      <button class="btn flex-item scissors">Scissors</button>
    </div>
    <div>
      <div class="cpuScore">
        <h2>Cpu Score</h2>
        <p></p>
      </div>
      <div class="playerScore">
        <h2>Player Score</h2>
        <p></p>
      </div>
    </div>

    <script>
      let cpuWins = 0;
      let playerWins = 0;
      let cpuChoice;

      const cpuScore = document.querySelectorAll("p");
      let updateCpuScore = function () {
        cpuScore[0].textContent = cpuWins;
      };

      const playerScore = document.querySelectorAll("p");
      let updatePlayerScore = function () {
        playerScore[1].textContent = playerWins;
      };

      function setCpuChoice() {
        let cpuChoiceNum = Math.floor(Math.random() * 3);
        if (cpuChoiceNum == 0) {
          cpuChoice = "rock";
        } else if (cpuChoiceNum == 1) {
          cpuChoice = "paper";
        } else {
          cpuChoice = "scissors";
        }
      }

      let playerRock = function () {
        setCpuChoice();

        if (cpuChoice == "scissors") {
          playerWins += 1;
          updatePlayerScore();
          if (playerWins == 5) {
            alert("You Win!");
            location.reload();
          }
        } else if (cpuChoice == "paper") {
          cpuWins += 1;
          updateCpuScore();
          if (cpuWins == 5) {
            alert("You Lose!");
            location.reload();
          }
        } else {
          return "tie";
        }
      };

      let playerPaper = function () {
        setCpuChoice();

        if (cpuChoice == "scissors") {
          cpuWins += 1;
          updateCpuScore();
          return "you lose";
        } else if (cpuChoice == "paper") {
          return "tie";
        } else {
          playerWins += 1;
          updatePlayerScore();
          return "you win";
        }
      };

      let playerScissors = function () {
        setCpuChoice();

        if (cpuChoice == "scissors") {
          return "tie";
        } else if (cpuChoice == "paper") {
          playerWins += 1;
          updatePlayerScore();
          return "you win";
        } else {
          cpuWins += 1;
          updateCpuScore();
          return "you lose";
        }
      };

      const rock = document.querySelector(".rock");
      rock.addEventListener("click", playerRock);

      const paper = document.querySelector(".paper");
      paper.addEventListener("click", playerPaper);

      const scissors = document.querySelector(".scissors");
      scissors.addEventListener("click", playerScissors);
    </script>
  </body>
</html>
